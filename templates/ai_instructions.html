{% extends "base.html" %}

{% block title %}–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ò–ò-–ê—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞ Kilo{% endblock %}

{% block content %}
<style>
    /* –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ */
    .reveal-on-scroll {
        opacity: 0;
        transform: translateY(30px);
        transition: opacity 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275), transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    .reveal-on-scroll.is-visible {
        opacity: 1;
        transform: translateY(0);
    }
    /* –°—Ç–∏–ª–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –¥–µ–º–æ-—á–∞—Ç–µ */
    .demo-chat-message {
        opacity: 0;
        transform: scale(0.9);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .demo-chat-message.visible {
        opacity: 1;
        transform: scale(1);
    }
</style>

<div class="bg-gray-50">
    <div class="container mx-auto px-4 pt-16 pb-20 md:pt-24 md:pb-28">

        <header class="text-center max-w-3xl mx-auto mb-16 md:mb-24 reveal-on-scroll">
            <h1 class="text-5xl md:text-6xl font-bold text-gray-800 tracking-tight leading-tight">
                –í–∞—à –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–π <br>
                <span class="bg-clip-text text-transparent bg-gradient-to-r from-indigo-500 to-purple-500">
                    Health-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Kilo
                </span>
            </h1>
            <p class="mt-5 text-lg text-gray-600">
                –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–æ—â—å –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞, –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –≤–∞—à–∏—Ö —Ñ–∏—Ç–Ω–µ—Å-—Ü–µ–ª–µ–π.
            </p>
        </header>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">

            <div class="reveal-on-scroll bg-white p-6 rounded-2xl border border-gray-200/80 shadow-sm hover:shadow-lg transition-shadow duration-300 flex flex-col">
                <div class="flex-shrink-0 h-48 bg-gray-100 rounded-xl overflow-hidden flex items-center justify-center">
                    <img src="{{ url_for('static', filename='uploads/meal.jpg') }}" alt="–ê–Ω–∞–ª–∏–∑ –µ–¥—ã" class="w-full h-full object-cover">
                </div>
                <div class="mt-5 flex-grow">
                    <h3 class="text-xl font-bold text-gray-800">üì∏ –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –µ–¥—ã</h3>
                    <p class="mt-2 text-gray-600">–°—Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—Ä—É–π—Ç–µ –±–ª—é–¥–æ, –∏ Kilo –æ–ø—Ä–µ–¥–µ–ª–∏—Ç –µ–≥–æ —Å–æ—Å—Ç–∞–≤, –∫–∞–ª–æ—Ä–∏–π–Ω–æ—Å—Ç—å –∏ –¥–∞—Å—Ç –≤–µ—Ä–¥–∏–∫—Ç –æ –ø–æ–ª—å–∑–µ –¥–ª—è –≤–∞—à–µ–π –¥–∏–µ—Ç—ã.</p>
                </div>
            </div>

            <div class="reveal-on-scroll bg-white p-6 rounded-2xl border border-gray-200/80 shadow-sm hover:shadow-lg transition-shadow duration-300 flex flex-col" style="transition-delay: 150ms;">
                <div class="flex-shrink-0 h-48 bg-gray-100 rounded-xl overflow-hidden flex items-center justify-center">
                    <img src="{{ url_for('static', filename='uploads/shutterstock_484908445.jpg') }}" alt="–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∏–µ—Ç—ã" class="w-full h-full object-cover">
                </div>
                <div class="mt-5 flex-grow">
                    <h3 class="text-xl font-bold text-gray-800">üçΩÔ∏è –ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∞—è –¥–∏–µ—Ç–∞</h3>
                    <p class="mt-2 text-gray-600">–ü–æ–ª—É—á–∏—Ç–µ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —Ä–∞—Ü–∏–æ–Ω —Å —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤–∞—à–∏—Ö —Ü–µ–ª–µ–π, –±–∏–æ–º–µ—Ç—Ä–∏–∏ –∏ –ª–∏—á–Ω—ã—Ö –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏–π.</p>
                </div>
            </div>

            <div class="reveal-on-scroll bg-white p-6 rounded-2xl border border-gray-200/80 shadow-sm hover:shadow-lg transition-shadow duration-300 flex flex-col md:col-span-2 lg:col-span-1" style="transition-delay: 300ms;">
                <div class="flex-shrink-0 h-48 bg-gray-100 rounded-xl overflow-hidden flex items-center justify-center p-4">
                    <img src="{{ url_for('static', filename='uploads/visualizations/29/visuals/29/20250925/1758793562_target.png') }}" alt="–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–ª–∞" class="max-h-full w-auto object-contain">
                </div>
                <div class="mt-5 flex-grow">
                    <h3 class="text-xl font-bold text-gray-800">ü§∏‚Äç‚ôÄÔ∏è –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞</h3>
                    <p class="mt-2 text-gray-600">–£–≤–∏–¥—å—Ç–µ, –∫–∞–∫ –∏–∑–º–µ–Ω–∏—Ç—Å—è –≤–∞—à–µ —Ç–µ–ª–æ. Kilo —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –±—É–¥—É—â–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –º–æ—Ç–∏–≤–∞—Ü–∏–∏.</p>
                </div>
            </div>
        </div>

        <div class="reveal-on-scroll mt-20 md:mt-28">
            <div class="text-center max-w-2xl mx-auto">
                 <h2 class="text-4xl font-bold text-gray-800">Kilo –≤ –¥–µ–π—Å—Ç–≤–∏–∏</h2>
                 <p class="mt-4 text-gray-600">–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ, –∫–∞–∫ –ª–µ–≥–∫–æ –ø–æ–ª—É—á–∏—Ç—å —ç–∫—Å–ø–µ—Ä—Ç–Ω—ã–π —Å–æ–≤–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.</p>
            </div>

            <div id="live-chat-demo-container" class="mt-10 max-w-2xl mx-auto bg-white border border-gray-200/80 rounded-2xl shadow-xl p-4 md:p-6 flex flex-col space-y-4 overflow-y-auto" style="height: 450px;">
                </div>

            <div class="text-center mt-8">
                <button onclick="document.getElementById('main-chat-toggle-button')?.click()"
                        class="inline-block bg-gradient-to-br from-indigo-500 to-sky-500 hover:from-indigo-600 hover:to-sky-600 px-8 py-3 rounded-lg font-semibold text-white transition-all transform hover:scale-105 shadow-md">
                    –ó–∞–¥–∞—Ç—å —Å–≤–æ–π –≤–æ–ø—Ä–æ—Å
                </button>
            </div>
        </div>

    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
    // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–æ–≤
    const observer = new IntersectionObserver(entries => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.classList.add('is-visible');
                observer.unobserve(entry.target);
            }
        });
    }, { threshold: 0.1 });

    document.querySelectorAll('.reveal-on-scroll').forEach(element => {
        observer.observe(element);
    });

    // --- –õ–æ–≥–∏–∫–∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ —á–∞—Ç–∞ ---
    const chatContainer = document.getElementById('live-chat-demo-container');
    const conversation = [
        { from: 'user', text: '–ü—Ä–∏–≤–µ—Ç! –ü–æ–¥—Å–∫–∞–∂–∏, —á—Ç–æ –ª—É—á—à–µ —Å—ä–µ—Å—Ç—å –Ω–∞ —É–∂–∏–Ω, –µ—Å–ª–∏ —è —Ö–æ—á—É –ø–æ—Ö—É–¥–µ—Ç—å?' },
        { from: 'kilo', text: '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! –î–ª—è –ª–µ–≥–∫–æ–≥–æ –∏ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–≥–æ —É–∂–∏–Ω–∞ –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –∑–∞–ø–µ—á–µ–Ω–Ω–∞—è –∫—É—Ä–∏–Ω–∞—è –≥—Ä—É–¥–∫–∞ —Å –æ–≤–æ—â–∞–º–∏ (–±—Ä–æ–∫–∫–æ–ª–∏, —Ü–≤–µ—Ç–Ω–∞—è –∫–∞–ø—É—Å—Ç–∞) –∏ —Å–∞–ª–∞—Ç –∏–∑ —Å–≤–µ–∂–µ–π –∑–µ–ª–µ–Ω–∏. –≠—Ç–æ –±–ª—é–¥–æ –±–æ–≥–∞—Ç–æ –±–µ–ª–∫–æ–º –∏ –∫–ª–µ—Ç—á–∞—Ç–∫–æ–π, —á—Ç–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å—ã—Ç–æ—Å—Ç—å –±–µ–∑ –ª–∏—à–Ω–∏—Ö –∫–∞–ª–æ—Ä–∏–π.' },
        { from: 'user', text: '–ê –º–æ–∂–Ω–æ —Ä–µ—Ü–µ–ø—Ç?' },
        { from: 'kilo', text: '–ö–æ–Ω–µ—á–Ω–æ! –ù–∞—Ç—Ä–∏—Ç–µ 150-200–≥ –∫—É—Ä–∏–Ω–æ–π –≥—Ä—É–¥–∫–∏ —Å–ø–µ—Ü–∏—è–º–∏, –∑–∞–≤–µ—Ä–Ω–∏—Ç–µ —Å –æ–≤–æ—â–∞–º–∏ –≤ —Ñ–æ–ª—å–≥—É –∏ –∑–∞–ø–µ–∫–∞–π—Ç–µ –ø—Ä–∏ 180¬∞C –æ–∫–æ–ª–æ 25-30 –º–∏–Ω—É—Ç. –ü—Ä–∏—è—Ç–Ω–æ–≥–æ –∞–ø–ø–µ—Ç–∏—Ç–∞!' },
    ];

    let messageIndex = 0;

    const createMessageHTML = (msg) => {
        if (msg.from === 'user') {
            return `
                <div class="flex justify-end demo-chat-message">
                    <div class="bg-indigo-500 text-white rounded-2xl rounded-br-none p-3 max-w-xs md:max-w-md">
                        ${msg.text}
                    </div>
                </div>`;
        } else {
            return `
                <div class="flex justify-start demo-chat-message">
                    <div class="bg-gray-200 text-gray-800 rounded-2xl rounded-bl-none p-3 max-w-xs md:max-w-md">
                        ${msg.text}
                    </div>
                </div>`;
        }
    };

    const showNextMessage = () => {
        if (messageIndex >= conversation.length) return;

        const msg = conversation[messageIndex];
        const msgHTML = createMessageHTML(msg);
        chatContainer.insertAdjacentHTML('beforeend', msgHTML);

        const newMessageElement = chatContainer.lastElementChild;

        setTimeout(() => {
            newMessageElement.classList.add('visible');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        }, 100);

        messageIndex++;
        setTimeout(showNextMessage, 1800); // –ò–Ω—Ç–µ—Ä–≤–∞–ª –º–µ–∂–¥—É —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    };

    // –ó–∞–ø—É—Å–∫–∞–µ–º –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—é, –∫–æ–≥–¥–∞ –±–ª–æ–∫ —á–∞—Ç–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –≤–∏–¥–∏–º—ã–º
    const chatObserver = new IntersectionObserver((entries) => {
        if (entries[0].isIntersecting) {
            setTimeout(showNextMessage, 500);
            chatObserver.unobserve(chatContainer);
        }
    }, { threshold: 0.5 });

    chatObserver.observe(chatContainer);
});
</script>
{% endblock %}